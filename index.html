<!doctype html>
<html lang="en">
<head>
<!-- THEGRID:HEAD:BEGIN -->
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>THEGRID ‚Äî Black & Gold ‚Ä¢ Live Custom</title>
<meta name="color-scheme" content="dark">
<style>
:root{
  --bg:#0b0d0f; --panel:#11141a; --ink:#e9edf4; --muted:#9aa6b3;
  --gold:#e4c35a; --accent:#10b3a6;
  --br-color:#2b3442; --br-accent:var(--gold); --br-width:1.5px; --br-radius:14px;
  --btn-radius:10px; --glow-strength:0; --header-h:76px;
  --shadow:0 8px 28px rgba(0,0,0,.45);
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; color:var(--ink);
  background:
    radial-gradient(1200px 800px at 12% -12%, rgba(228,195,90,.13), transparent 60%),
    radial-gradient(1000px 800px at 120% -30%, rgba(228,195,90,.06), transparent 65%),
    var(--bg);
  font:500 16px/1.55 ui-sans-serif,system-ui,-apple-system,Inter,Segoe UI,Roboto,Helvetica,Arial;
  padding-top:var(--header-h);
}
.wrap{width:min(1040px,92vw); margin-inline:auto}
.stack{display:grid; gap:14px}
.grid{display:grid; gap:14px}
.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:780px){.cols-2,.cols-3{grid-template-columns:1fr}}
.muted{color:var(--muted)}

/* Border engine (global + per-section via data-br-style) */
.borderable{
  position:relative; border-radius:var(--br-radius);
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--panel);
  border:var(--br-width) solid var(--br-color);
  box-shadow:var(--shadow), 0 0 var(--glow-strength) rgba(228,195,90,.28);
}
[ data-br-style="double"  ], :root[br-style="double"]  .borderable{border:calc(var(--br-width)*2) double var(--br-color)}
[ data-br-style="bevel"   ], :root[br-style="bevel"]   .borderable{border:var(--br-width) solid color-mix(in oklab, var(--br-color) 80%, #fff 20%); box-shadow:var(--shadow), inset 0 1px 0 rgba(255,255,255,.06), inset 0 -1px 0 rgba(0,0,0,.35)}
[ data-br-style="glow"    ], :root[br-style="glow"]    .borderable{box-shadow:var(--shadow), 0 0 calc(var(--glow-strength)*.6) color-mix(in oklab, var(--br-accent) 80%, transparent), 0 0 var(--glow-strength) color-mix(in oklab, var(--br-accent) 60%, transparent)}
[ data-br-style="gradient"], :root[br-style="gradient"] .borderable::before{
  content:""; position:absolute; inset:-1px; border-radius:inherit; padding:1px;
  background:linear-gradient(135deg, var(--br-accent), rgba(255,255,255,.08), rgba(255,255,255,0), var(--br-accent));
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
}

/* Header */
.topbar{position:fixed; inset:0 0 auto 0; height:var(--header-h); z-index:40; display:flex; align-items:center;
  background:linear-gradient(180deg, rgba(10,12,15,.88), rgba(10,12,15,.58)); backdrop-filter: blur(10px) saturate(120%);
  border-bottom:var(--br-width) solid var(--br-color);}
.topin{display:flex; align-items:center; gap:12px}
.logo{width:48px;height:48px;border-radius:12px;overflow:hidden;background:#0c0f13;display:grid;place-items:center; border:var(--br-width) solid var(--br-color)}
.logo video,.logo img{width:100%;height:100%;object-fit:cover;display:block}
.greet{display:grid;grid-template-columns:44px 1fr;gap:12px;align-items:center}
.gico{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;
  background:radial-gradient(80% 80% at 30% 20%, var(--gold), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.2));
  border:var(--br-width) solid var(--br-color)}
.gtxt{display:flex;flex-direction:column;line-height:1.05}
.g1{font-weight:800;letter-spacing:.2px}
.g2{opacity:.75}

/* Buttons */
.btn{display:inline-grid; place-items:center; min-height:44px; padding:10px 16px; border-radius:var(--btn-radius);
  border:var(--br-width) solid var(--br-color); background:#12161b; color:#f1f1f1; box-shadow:inset 0 1px 0 rgba(255,255,255,.04); font-weight:800; cursor:pointer;
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease}
.btn:hover{transform:translateY(-1px); box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06)}
.btn.gold{background:linear-gradient(180deg,#3b2f12,#241d0b); border-color:#5b4a1b; color:#f7eac1}
.btn.block{width:100%}

/* Cards and sections */
.card.borderable{padding:18px}
h1{font-size:clamp(32px,6.6vw,56px);line-height:1.06;margin:0 0 6px}
h2{font-size:22px;margin:2px 0 8px}

/* Hero media */
.hero .media{overflow:hidden;border-radius:calc(var(--br-radius) + 4px); background:#090b0f}
.hero .media video,.hero .media img{width:100%; height:auto; display:block}

/* Library */
.tiles{display:grid;gap:12px}
.thumb{min-height:150px; display:grid; place-items:center; color:#78859a; cursor:pointer; background:#0d1115; border-radius:12px; border:var(--br-width) solid var(--br-color)}
.thumb video,.thumb img{width:100%;height:100%;object-fit:cover;border-radius:10px;display:block}
.thumb.active{outline:2px solid var(--gold); box-shadow:0 0 0 3px rgba(228,195,90,.25) inset}

/* Pricing + diamonds */
.plan{padding:16px;border-radius:16px;background:#0d1115; border:var(--br-width) solid var(--br-color)}
.price{font-size:40px;font-weight:900}
.unit{opacity:.78;font-weight:700}
.premium{position:relative; box-shadow:0 0 0 1px rgba(207,166,74,.28) inset, 0 0 36px rgba(207,166,74,.08)}
.diamond{position:absolute;width:14px;height:14px;
  background:radial-gradient(50% 60% at 50% 35%, #fff 0 25%, transparent 26%), conic-gradient(from 0turn,#b1e9ff,#e9f6ff 30%,#b1e9ff 60%,#9fd3ff 85%,#b1e9ff);
  clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%);
  filter:drop-shadow(0 1px 3px rgba(255,255,255,.35)) saturate(1.2); animation:sparkle 2.6s linear infinite; opacity:.95}
.d2{width:11px;height:11px} .d3{width:9px;height:9px} .d4{width:12px;height:12px}
@keyframes sparkle{0%,100%{transform:rotate(0) scale(1);filter:drop-shadow(0 0 6px rgba(255,255,255,.35))}35%{transform:rotate(22deg) scale(1.06);filter:drop-shadow(0 0 10px rgba(255,255,255,.55))}70%{transform:rotate(-18deg) scale(1.02)}}

/* Owner panel */
#ownerPanel{position:fixed; right:16px; bottom:16px; z-index:60; width:min(460px,92vw); display:none; flex-direction:column; gap:10px}
#ownerPanel.open{display:flex}
.panelCard{padding:14px; background:#0e1217; border-radius:14px; border:var(--br-width) solid var(--br-color); box-shadow:var(--shadow)}
.roww{display:flex; gap:8px; flex-wrap:wrap}
.sel{padding:8px 10px; border-radius:10px; border:1px solid #263043; background:#0f141b; cursor:pointer; font-weight:700; color:#d9dfeb}
.sel.active{outline:2px solid var(--gold); box-shadow:0 0 0 3px rgba(228,195,90,.22) inset}
input[type="color"], input[type="range"], select{border-radius:10px; border:1px solid #263043; background:#0f141b; color:#e8edf6; padding:8px}
.small{font-size:12px;color:#96a2b3} hr.split{border:none;border-top:1px solid #1f2734;margin:6px 0}

/* Confetti canvas */
#confetti{position:fixed; inset:0; pointer-events:none; z-index:80}
</style>
<!-- THEGRID:HEAD:END -->
</head>
<body>

<canvas id="confetti"></canvas>

<header class="topbar">
  <div class="wrap topin">
    <div class="logo" id="logo">
      <video src="assets/videos/gc_spin.mp4" autoplay muted loop playsinline poster="assets/images/gc_logo.png"></video>
      <img src="assets/images/gc_logo.png" alt="THEGRID logo" onerror="this.style.display='none'"/>
    </div>
    <div class="greet">
      <div class="gico" id="gico">‚òÄÔ∏è</div>
      <div class="gtxt"><strong class="g1" id="gline">Good afternoon</strong><span class="g2">‚Äî THEGRID</span></div>
    </div>
    <div style="flex:1"></div>
    <button class="btn" id="btnCustomize">Customize</button>
    <a class="btn gold" href="#pricing" data-confetti>Join Now</a>
  </div>
</header>

<main class="wrap stack">

  <!-- THEGRID:HERO:BEGIN -->
  <section class="card borderable hero" id="heroCard">
    <h1>Black &amp; Gold <span style="color:var(--gold)">Creativity</span></h1>
    <p class="muted">Cinematic visuals. One-file updates. Owner controls with presets, vibes, borders & glow.</p>
    <div class="stack">
      <div class="grid cols-3">
        <a class="btn" href="#library">Open Library</a>
        <a class="btn" href="#pricing">See Pricing</a>
        <button class="btn gold" data-confetti>Monetise</button>
      </div>
      <div class="media borderable" id="heroMedia">
        <video id="hero" autoplay muted playsinline loop poster="assets/images/hero_1.jpg" src="assets/videos/hero_1.mp4"></video>
      </div>
    </div>
  </section>
  <!-- THEGRID:HERO:END -->

  <!-- THEGRID:LIBRARY:BEGIN -->
  <section id="library" class="card borderable">
    <h2>Library</h2>
    <p class="muted">Tap a tile to set as Hero. Each tile can carry a <em>vibe</em> that rethemes sections.</p>
    <div class="grid cols-3 tiles" id="tiles">
      <div class="thumb" data-src="assets/videos/gc_spin.mp4" data-vibe="diamond-luxe">gc_spin.mp4</div>
      <div class="thumb" data-src="assets/videos/hero_1.mp4" data-vibe="showcase-gold">hero_1.mp4</div>
      <div class="thumb" data-src="assets/videos/interaction_1.mp4" data-vibe="neon-aqua">interaction_1.mp4</div>
      <div class="thumb" data-src="assets/images/gc_logo.png" data-vibe="diamond-luxe">gc_logo.png</div>
      <div class="thumb" data-src="assets/images/hero_1.jpg" data-vibe="editorial-double">hero_1.jpg</div>
      <div class="thumb" data-src="assets/images/hero_2.jpg" data-vibe="noir-bevel">hero_2.jpg</div>
    </div>
  </section>
  <!-- THEGRID:LIBRARY:END -->

  <!-- THEGRID:PRICING:BEGIN -->
  <section id="pricing" class="card borderable">
    <div class="grid cols-3" style="align-items:center">
      <div><h2 style="margin:0">Monetise</h2><p class="muted">Launch Pricing (Limited)</p></div>
      <div></div>
      <div style="text-align:right"><span class="sel active">Live</span></div>
    </div>

    <div class="grid cols-3" style="margin-top:10px">
      <div class="plan borderable" id="planBasic">
        <div class="price">¬£9<span class="unit">/mo</span></div>
        <p class="muted">Basic</p>
        <ul style="margin:8px 0 14px; padding-left:18px">
          <li>Starter templates</li><li>Library access</li><li>Email support</li>
        </ul>
        <button class="btn gold" data-confetti>Choose Basic</button>
      </div>

      <div class="plan borderable" id="planSilver">
        <div class="price">¬£29<span class="unit">/mo</span></div>
        <p class="muted">Silver</p>
        <ul style="margin:8px 0 14px; padding-left:18px">
          <li>Everything in Basic</li><li>Advanced effects</li><li>Priority support</li>
        </ul>
        <button class="btn gold" data-confetti>Choose Silver</button>
      </div>

      <div class="plan borderable premium" id="planGold">
        <div class="price">¬£49<span class="unit">/mo</span></div>
        <p class="muted">Gold</p>
        <ul style="margin:8px 0 14px; padding-left:18px">
          <li>Full customization</li><li>Admin toolkit</li><li>1:1 onboarding</li>
        </ul>
        <button class="btn gold" data-confetti>Choose Gold</button>
        <i class="diamond" style="left:-10px;bottom:-10px"></i>
        <i class="diamond d2" style="right:-10px;top:-10px"></i>
        <i class="diamond d3" style="right:40%;top:-8px"></i>
        <i class="diamond d4" style="right:8%;bottom:-12px"></i>
      </div>
    </div>

    <h3 style="margin:18px 0 8px">√Ä-la-carte Services</h3>
    <div class="grid cols-3">
      <div class="plan borderable"><strong>One-time Setup</strong><div class="muted">Deploy &amp; connect Pages</div><div class="price" style="font-size:34px">¬£39</div><button class="btn gold" data-confetti>Start Setup</button></div>
      <div class="plan borderable"><strong>Custom Reel Pack</strong><div class="muted">3 reels tuned to your niche</div><div class="price" style="font-size:34px">¬£59</div><button class="btn gold" data-confetti>Order Pack</button></div>
      <div class="plan borderable"><strong>Template Pack</strong><div class="muted">5 premium blocks</div><div class="price" style="font-size:34px">¬£29</div><button class="btn gold" data-confetti>Get Pack</button></div>
    </div>
  </section>
  <!-- THEGRID:PRICING:END -->

  <!-- THEGRID:FAQ:BEGIN -->
  <section class="card borderable">
    <h2>FAQ</h2>
    <p><b>No-code updates?</b> Yes ‚Äî replace <code>index.html</code>, drop media into <code>assets</code>.</p>
    <p><b>Missing files?</b> Clean placeholders show ‚Äî nothing breaks.</p>
  </section>
  <!-- THEGRID:FAQ:END -->

  <footer class="muted" style="text-align:center">¬© THEGRID ‚Ä¢ Privacy ‚Ä¢ Terms</footer>
</main>

<!-- THEGRID:OWNER-PANEL:BEGIN -->
<div id="ownerPanel" class="stack">
  <div class="panelCard">
    <div class="roww"><strong>Design Panel</strong><span class="small">(Owner only ¬∑ long-press logo once per device)</span></div>
    <hr class="split">

    <!-- Presets -->
    <div class="roww"><span class="small">Presets</span>
      <button class="sel" data-preset="showcase-gold">Showcase Gold Glow</button>
      <button class="sel" data-preset="editorial-double">Editorial Double</button>
      <button class="sel" data-preset="stealth-minimal">Stealth Minimal</button>
      <button class="sel" data-preset="diamond-luxe">Diamond Luxe</button>
      <button class="sel" data-preset="neon-aqua">Neon Aqua</button>
      <button class="sel" data-preset="noir-bevel">Noir Bevel</button>
    </div>

    <!-- Border styles -->
    <div class="roww"><span class="small">Border Style</span>
      <button class="sel" data-brstyle="solid">Solid</button>
      <button class="sel" data-brstyle="double">Double</button>
      <button class="sel" data-brstyle="gradient">Gradient</button>
      <button class="sel" data-brstyle="glow">Glow</button>
      <button class="sel" data-brstyle="bevel">Bevel</button>
    </div>

    <!-- Sliders/Colors -->
    <div class="roww">
      <label class="small">Border width</label><input id="brWidth" type="range" min="1" max="4" step="0.5" value="1.5">
      <label class="small">Radius</label><input id="brRadius" type="range" min="6" max="22" step="1" value="14">
      <label class="small">Glow</label><input id="glow" type="range" min="0" max="36" step="2" value="0">
    </div>
    <div class="roww">
      <label class="small">Border color</label><input id="brColor" type="color" value="#2b3442">
      <label class="small">Accent</label><input id="brAccent" type="color" value="#e4c35a">
      <label class="small">Gold</label><input id="gold" type="color" value="#e4c35a">
      <label class="small">Panel</label><input id="panel" type="color" value="#11141a">
      <label class="small">Buttons radius</label><input id="btnRadius" type="range" min="6" max="18" step="1" value="10">
    </div>

    <!-- Scope -->
    <hr class="split">
    <div class="roww"><span class="small">Apply to section</span>
      <button class="sel active" data-scope="all">All</button>
      <button class="sel" data-scope="hero">Hero</button>
      <button class="sel" data-scope="library">Library</button>
      <button class="sel" data-scope="pricing">Pricing</button>
      <button class="sel" data-scope="buttons">Buttons</button>
    </div>

    <div class="roww">
      <button class="btn" id="saveLook">Save to this device</button>
      <button class="btn" id="resetLook">Reset</button>
      <button class="btn gold" id="closePanel">Close</button>
    </div>
  </div>
</div>
<!-- THEGRID:OWNER-PANEL:END -->

<!-- THEGRID:SCRIPTS:BEGIN -->
<script>
/* Header spacing */
(()=>{const tb=document.querySelector('.topbar'); const setH=()=>document.documentElement.style.setProperty('--header-h', tb.getBoundingClientRect().height+'px'); setH(); addEventListener('resize', setH)})();

/* Greeting */
(()=>{const h=(new Date()).getHours(), line=document.getElementById('gline'), ico=document.getElementById('gico');
let label='Hello', emoji='‚ú®'; if(h>=5&&h<12){label='Good morning';emoji='üåÖ'} else if(h>=12&&h<17){label='Good afternoon';emoji='‚òÄÔ∏è'} else if(h>=17&&h<21){label='Good evening';emoji='üåá'} else {label='Good night';emoji='üåô'} line.textContent=label; ico.textContent=emoji;})();

/* Confetti (fast, dense, glowing) + live tunables */
(()=>{const S=window.runConfettiSettings={n:150,bursts:2,hue:48,jit:12,spdMin:6.2,spdMax:12.8,grav:.32,drag:.994,spinMin:-.28,spinMax:.28,szMin:4,szMax:10,lifeMin:140,lifeMax:220,glow:14,maxLive:900,wind:.004};
const c=document.getElementById('confetti'),x=c.getContext('2d');let W,H,D;const rs=()=>{D=Math.min(devicePixelRatio||1,2);W=c.width=innerWidth*D;H=c.height=innerHeight*D;c.style.width=innerWidth+'px';c.style.height=innerHeight+'px';x.setTransform(D,0,0,D,0,0)};addEventListener('resize',rs,{passive:true}); rs();
const R=(a,b)=>a+Math.random()*(b-a), P=[]; let f;
function sp(cx,cy){for(let b=0;b<S.bursts;b++){for(let i=0;i<S.n;i++){if(P.length>=S.maxLive)break;const ang=R(-Math.PI,0),spd=R(S.spdMin,S.spdMax),h=S.hue+R(-S.jit,S.jit);
P.push({x:cx,y:cy,vx:Math.cos(ang)*spd,vy:Math.sin(ang)*spd,r:R(0,6.28),vr:R(S.spinMin,S.spinMax),s:R(S.szMin,S.szMax),life:R(S.lifeMin,S.lifeMax),shape:(['rect','tri','dot'][(Math.random()*3)|0]),col:`hsl(${h} 85% 55%)`});}} if(!f)loop();}
function draw(p){x.save();x.translate(p.x,p.y);x.rotate(p.r);x.fillStyle=p.col;x.shadowBlur=S.glow;x.shadowColor=p.col;
if(p.shape==='rect')x.fillRect(-p.s/2,-p.s/2,p.s,p.s*.65); else if(p.shape==='tri'){x.beginPath();x.moveTo(0,-p.s/1.2);x.lineTo(p.s/1.2,p.s/1.2);x.lineTo(-p.s/1.2,p.s/1.2);x.closePath();x.fill();} else {x.beginPath();x.arc(0,0,p.s*.45,0,6.28);x.fill();}
x.restore();}
function loop(){f=requestAnimationFrame(loop);x.clearRect(0,0,innerWidth,innerHeight);for(let i=P.length-1;i>=0;i--){const p=P[i];p.vx+=R(-S.wind,S.wind);p.vy+=S.grav;p.vx*=S.drag;p.vy*=S.drag;p.x+=p.vx;p.y+=p.vy;p.r+=p.vr;p.life--;draw(p);if(p.life<=0||p.y-20>innerHeight)P.splice(i,1);} if(!P.length){cancelAnimationFrame(f);f=null;}}
window.runConfetti=(el)=>{const r=el?el.getBoundingClientRect():{left:innerWidth/2,top:innerHeight/2,width:0,height:0};sp(r.left+r.width/2,r.top+r.height/2);}
document.addEventListener('click',e=>{const el=e.target.closest('[data-confetti]'); if(el) runConfetti(el);});})();

/* Owner toggle (long-press logo) */
(()=>{const logo=document.getElementById('logo'),panel=document.getElementById('ownerPanel'); let t;
const setOwner=v=>{localStorage.setItem('gc_owner',v?'1':'0'); panel.classList.toggle('open',!!v);};
if(localStorage.getItem('gc_owner')==='1') setOwner(true);
function start(){clearTimeout(t); t=setTimeout(()=>setOwner(localStorage.getItem('gc_owner')!=='1'),1500);}
function stop(){clearTimeout(t);}
['touchstart','mousedown'].forEach(e=>logo.addEventListener(e,start));
['touchend','mouseup','mouseleave'].forEach(e=>logo.addEventListener(e,stop));
document.getElementById('btnCustomize').onclick=()=>{ if(localStorage.getItem('gc_owner')==='1') panel.classList.add('open'); else alert('Owner controls hidden. Long-press the logo to enable on this device.'); };
document.getElementById('closePanel').onclick=()=>panel.classList.remove('open');
})();

/* Presets + scopes */
(()=>{const PRESETS={
  'showcase-gold': {brStyle:'glow', brWidth:1.5, brRadius:16, glow:24, brColor:'#2b3442', brAccent:'#e4c35a', gold:'#e4c35a', panel:'#11141a', btnRadius:12},
  'editorial-double': {brStyle:'double', brWidth:2, brRadius:14, glow:0, brColor:'#394555', brAccent:'#d9dee7', gold:'#e4c35a', panel:'#0f141b', btnRadius:10},
  'stealth-minimal': {brStyle:'solid', brWidth:1, brRadius:10, glow:0, brColor:'#1e252f', brAccent:'#607086', gold:'#caa94d', panel:'#0c0f13', btnRadius:8},
  'diamond-luxe': {brStyle:'gradient', brWidth:1.5, brRadius:18, glow:18, brColor:'#364356', brAccent:'#b7e7ff', gold:'#f1de8a', panel:'#0f1319', btnRadius:12},
  'neon-aqua': {brStyle:'glow', brWidth:1.5, brRadius:14, glow:26, brColor:'#153a3a', brAccent:'#10b3a6', gold:'#d8f7f2', panel:'#0b1212', btnRadius:14},
  'noir-bevel': {brStyle:'bevel', brWidth:1.5, brRadius:12, glow:0, brColor:'#2a2f38', brAccent:'#9aa3af', gold:'#d9c078', panel:'#0e1116', btnRadius:10}
};
const SCOPE_MAP={all:['.borderable','.btn'],hero:['#heroCard','.hero .media'],library:['#library','.thumb'],pricing:['#pricing','.plan'],buttons:['.btn']};
const root=document.documentElement;
const qsAll=s=>[...document.querySelectorAll(s)];
const brWidth=document.getElementById('brWidth'), brRadius=document.getElementById('brRadius'), glow=document.getElementById('glow'), brColor=document.getElementById('brColor'), brAccent=document.getElementById('brAccent'), gold=document.getElementById('gold'), panel=document.getElementById('panel'), btnRadius=document.getElementById('btnRadius');
let scope='all', activeStyle='solid';

function applyVars(v){const set=(k,val)=>root.style.setProperty(k,val);
  set('--br-width',(v.brWidth??brWidth.value)+'px'); set('--br-radius',(v.brRadius??brRadius.value)+'px'); set('--glow-strength',(v.glow??glow.value)+'px');
  set('--br-color',v.brColor??brColor.value); set('--br-accent',v.brAccent??brAccent.value); set('--gold',v.gold??gold.value); set('--panel',v.panel??panel.value);
  set('--btn-radius',(v.btnRadius??btnRadius.value)+'px');
}
function setStyleOnScope(style){
  activeStyle=style;
  if(scope==='all'){ root.setAttribute('br-style', style); qsAll('[data-br-style]').forEach(n=>n.removeAttribute('data-br-style')); return; }
  qsAll(Object.values(SCOPE_MAP).flat().join(',')).forEach(n=>n.removeAttribute('data-br-style'));
  (SCOPE_MAP[scope]||[]).forEach(sel=>qsAll(sel).forEach(n=>n.setAttribute('data-br-style', style)));
}
qsAll('[data-brstyle]').forEach(b=>b.addEventListener('click',()=>{qsAll('[data-brstyle]').forEach(x=>x.classList.remove('active')); b.classList.add('active'); setStyleOnScope(b.dataset.brstyle);}));
qsAll('[data-scope]').forEach(b=>b.addEventListener('click',()=>{scope=b.dataset.scope; qsAll('[data-scope]').forEach(x=>x.classList.toggle('active',x.dataset.scope===scope)); setStyleOnScope(activeStyle);}));
[brWidth,brRadius,glow,brColor,brAccent,gold,panel,btnRadius].forEach(i=>i.addEventListener('input',()=>applyVars({})));
qsAll('[data-preset]').forEach(b=>b.addEventListener('click',()=>{const p=PRESETS[b.dataset.preset]; if(!p)return; qsAll('[data-preset]').forEach(x=>x.classList.remove('active')); b.classList.add('active'); applyVars(p); setStyleOnScope(p.brStyle);
  brWidth.value=p.brWidth; brRadius.value=p.brRadius; glow.value=p.glow; brColor.value=p.brColor; brAccent.value=p.brAccent; gold.value=p.gold; panel.value=p.panel; btnRadius.value=p.btnRadius; }));
document.getElementById('saveLook').onclick=()=>{const state={scope, style:activeStyle, brWidth:brWidth.value, brRadius:brRadius.value, glow:glow.value, brColor:brColor.value, brAccent:brAccent.value, gold:gold.value, panel:panel.value, btnRadius:btnRadius.value}; localStorage.setItem('gc_look', JSON.stringify(state)); alert('Saved to this device.');};
document.getElementById('resetLook').onclick=()=>{localStorage.removeItem('gc_look'); location.reload();};
(function restore(){const s=localStorage.getItem('gc_look'); if(!s){document.querySelector('[data-preset="showcase-gold"]').click(); return;} try{const v=JSON.parse(s); scope=v.scope||'all'; activeStyle=v.style||'solid';
  brWidth.value=v.brWidth; brRadius.value=v.brRadius; glow.value=v.glow; brColor.value=v.brColor; brAccent.value=v.brAccent; gold.value=v.gold; panel.value=v.panel; btnRadius.value=v.btnRadius; applyVars(v); setStyleOnScope(activeStyle);
  qsAll('[data-scope]').forEach(x=>x.classList.toggle('active',x.dataset.scope===scope)); }catch{ document.querySelector('[data-preset="showcase-gold"]').click(); }})();
})();

/* Library: set Hero + auto-vibe mapping */
(()=>{const VIBE_TO_PRESET={'showcase-gold':'showcase-gold','editorial-double':'editorial-double','stealth-minimal':'stealth-minimal','diamond-luxe':'diamond-luxe','neon-aqua':'neon-aqua','noir-bevel':'noir-bevel'};
const hero=document.getElementById('hero'); document.querySelectorAll('.thumb').forEach(t=>{const src=t.dataset.src, vibe=t.dataset.vibe; if(!src) return;
  const isVideo=/\.(mp4|webm|mov)$/i.test(src); if(isVideo){const v=document.createElement('video'); v.src=src; v.muted=true; v.playsInline=true; v.loop=true; v.oncanplay=()=>t.classList.add('active');} else {const i=new Image(); i.src=src; i.onload=()=>t.classList.add('active');}
  t.addEventListener('click', ()=>{document.querySelectorAll('.thumb').forEach(x=>x.classList.remove('picked')); t.classList.add('picked');
    if(isVideo){ hero.removeAttribute('poster'); hero.src=src; hero.play().catch(()=>{});} else { hero.pause(); hero.removeAttribute('src'); hero.load(); hero.setAttribute('poster', src);}
    const btn=vibe?document.querySelector(`[data-preset="${VIBE_TO_PRESET[vibe]}"]`):null; if(btn){const scopes=[...document.querySelectorAll('[data-scope]')];
      const clickScope=n=>scopes.find(b=>b.dataset.scope===n)?.click(); clickScope('hero'); btn.click(); clickScope('pricing'); btn.click(); clickScope('all');}
    scrollTo({top:0,behavior:'smooth'}); });
});})();
</script>
<!-- THEGRID:SCRIPTS:END -->
<!-- THEGRID:PATCH-SLOT:BEGIN (v2.2 All-in-One + Media Manager) -->
<script>
(()=>{
  const VER="v2.2";
  const OWNER_KEY="tg_owner";
  const isOwner = localStorage.getItem(OWNER_KEY)==="1";

  /* ========= CONTACT CONFIG =========
     Works now with mailto ‚Üí gridcoresystems@gmail.com
     Add EmailJS keys later to switch to in-site send automatically.
  */
  const CONTACT_TO = "gridcoresystems@gmail.com";
  const EMAILJS_PUBLIC_KEY = "";  // e.g. "nP3xYz_abC123"
  const EMAILJS_SERVICE_ID = "";  // e.g. "service_gmail"
  const EMAILJS_TEMPLATE_ID = ""; // e.g. "template_contact"

  /* ========= THEME (same as before, persisted CSS vars) ========= */
  const DEFAULTS={ "--tg-gold":"#FFD700","--tg-gold-deep":"#C59D00","--tg-silver":"#C0C0C0","--tg-diamond":"#B9F2FF",
    "--tg-ink":"#0C0F14","--tg-panel":"#11151B","--tg-card":"#131922","--tg-card-ink":"#E9EEF6",
    "--tg-border":"#FFD700","--tg-accent":"#FFD700","--tg-ring":"rgba(255,215,0,.25)",
    "--tg-radius":"18px","--tg-border-w":"2px","--tg-border-glow":"0 0 20px rgba(255,215,0,.25), inset 0 0 12px rgba(255,255,255,.04)",
    "--tg-btn-radius":"14px","--tg-btn-bg":"#191F29","--tg-btn-fg":"#F5F7FA",
    "--tg-btn-ring":"0 0 0 1px rgba(255,255,255,.06), 0 1px 12px rgba(0,0,0,.35)","--tg-btn-bg-hover":"#1E2633" };
  const VARS_KEY="tg_theme_vars";
  const loadVars=()=>{try{return Object.assign({},DEFAULTS,JSON.parse(localStorage.getItem(VARS_KEY)||"{}"))}catch{return {...DEFAULTS}}};
  const saveVars=v=>{try{localStorage.setItem(VARS_KEY,JSON.stringify(v))}catch{}};
  const VARS=loadVars();
  const applyVars=(v=VARS)=>{Object.entries(v).forEach(([k,val])=>document.documentElement.style.setProperty(k,val));};
  applyVars();

  function toColor(v){ if(!v) return "#ffffff"; if(/^#/.test(v)) return v;
    const m=/rgba?\((\d+),\s*(\d+),\s*(\d+)/.exec(v); if(!m) return "#ffffff";
    const h=n=>(+n).toString(16).padStart(2,"0"); return "#"+h(m[1])+h(m[2])+h(m[3]); }
  function pxNum(v,f){const n=parseInt(String(v||"").replace("px",""),10);return Number.isFinite(n)?n:f;}

  // Long-press logo to unlock owner
  const logo=document.getElementById("siteLogo");
  if(logo){
    let t; const on=()=>{t=setTimeout(()=>{localStorage.setItem(OWNER_KEY,"1");location.reload()},800)};
    const off=()=>clearTimeout(t);
    logo.addEventListener("touchstart",on); logo.addEventListener("touchend",off);
    logo.addEventListener("mousedown",on);  logo.addEventListener("mouseup",off);
  }

  /* ========= CONFETTI (light, mobile-safe) ========= */
  const TIERS={basic:{color:"#ADADB8",shape:"‚Ä¢",size:12,density:14,speed:1.1},
               silver:{color:"#C0C0C0",shape:"‚ñ†",size:12,density:18,speed:1.0},
               gold:{color:"#FFD700",shape:"‚ñ≤",size:14,density:24,speed:1.0},
               diamond:{color:"#B9F2FF",shape:"‚ú¶",size:14,density:28,speed:0.95}};
  const reduce=matchMedia('(prefers-reduced-motion: reduce)').matches;
  const small=Math.min(innerWidth,innerHeight)<480;
  const scale = reduce?0.3: small?0.5: 1;

  function burst(btn,tierKey='basic'){
    if(reduce) return;
    const style=TIERS[tierKey]||TIERS.basic;
    const N=Math.max(12,Math.round(style.density*scale));
    const rect=btn.getBoundingClientRect(); const ox=rect.left+rect.width/2; const oy=rect.top+rect.height/2+scrollY;
    for(let i=0;i<N;i++){
      const s=document.createElement('span'); s.textContent=style.shape;
      Object.assign(s.style,{position:'absolute',left:`${ox}px`,top:`${oy}px`,transform:'translate(-50%,-50%)',color:style.color,fontSize:`${style.size}px`,pointerEvents:'none',zIndex:9999,
        textShadow:`0 0 6px ${style.color},0 0 12px ${style.color}`,animation:`tgFall ${1.2*style.speed+Math.random()*0.6}s linear forwards`,
        '--dx':`${(Math.random()-.5)*160}px`});
      document.body.appendChild(s); setTimeout(()=>s.remove(),2200);
    }
  }
  if(!document.getElementById('tgFall-anim')){
    const st=document.createElement('style'); st.id='tgFall-anim';
    st.textContent=`@keyframes tgFall{0%{transform:translate(-50%,-50%) translateY(0) rotate(0);opacity:1}100%{transform:translate(-50%,-50%) translateY(64vh) translateX(var(--dx)) rotate(540deg);opacity:0}}`;
    document.head.appendChild(st);
  }
  function wireConfetti(){
    document.querySelectorAll('.pricing-card .choose-btn,.pricing-card .tg-purchase').forEach(btn=>{
      if(btn._tgBound) return; btn._tgBound=1;
      btn.addEventListener('click',()=>{
        const tier=(btn.dataset.tier||(btn.closest('.pricing-card')?.dataset.tier)||'basic');
        burst(btn,tier);
      });
    });
  }
  wireConfetti();

  /* ========= CONTACT (mailto now; EmailJS later when keys added) ========= */
  const cssId='tg-contact-css';
  if(!document.getElementById(cssId)){
    const css=document.createElement('style'); css.id=cssId; css.textContent=`
      .tg-contact{max-width:720px;margin:24px auto;padding:18px;background:var(--tg-card,#131922);color:var(--tg-card-ink,#E9EEF6);border-radius:var(--tg-radius,18px);border:1px solid rgba(255,255,255,.08);box-shadow:0 10px 32px rgba(0,0,0,.35)}
      .tg-contact h3{margin:0 0 12px;font-weight:800;letter-spacing:.2px}
      .tg-field{display:grid;gap:6px;margin:10px 0}
      .tg-field input,.tg-field textarea{background:#0E141C;color:#E9EEF6;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px;outline:none}
      .tg-field input:focus,.tg-field textarea:focus{border-color:var(--tg-border,#FFD700)}
      .tg-btn{display:inline-flex;align-items:center;gap:.5rem;padding:.8rem 1.1rem;border-radius:var(--tg-btn-radius,14px);background:var(--tg-btn-bg,#191F29);color:var(--tg-btn-fg,#F5F7FA);border:1px solid rgba(255,255,255,.10);cursor:pointer;font-weight:700}
      .tg-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
      @media(max-width:680px){.tg-row{grid-template-columns:1fr}}
      .tg-note{opacity:.7;font-size:.9rem;margin-top:10px}
      .tg-toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#0b1016;color:#cfe1ff;border:1px solid #2a3040;border-radius:10px;padding:10px 14px;z-index:9999;box-shadow:0 10px 30px rgba(0,0,0,.45);opacity:0;transition:opacity .15s}`; 
    document.head.appendChild(css);
  }
  function toast(msg,ok=true){const t=document.createElement('div');t.className='tg-toast';t.style.borderColor=ok?'#2a3040':'#5a2a2a';t.style.color=ok?'#cfe1ff':'#ffd7d7';t.textContent=msg;document.body.appendChild(t);requestAnimationFrame(()=>t.style.opacity=1);setTimeout(()=>{t.style.opacity=0;setTimeout(()=>t.remove(),200)},2400)}
  function ensureContact(){
    if(document.getElementById('tg-contact')) return;
    const host=document.querySelector('#contact')||document.querySelector('main')||document.body;
    const wrap=document.createElement('section'); wrap.id='tg-contact'; wrap.className='tg-contact tg-border glow';
    wrap.innerHTML=`
      <h3>Contact us</h3>
      <form id="tg-contact-form">
        <div class="tg-row">
          <label class="tg-field"><span>Name</span><input type="text" name="from_name" required placeholder="Your name"></label>
          <label class="tg-field"><span>Email</span><input type="email" name="reply_to" required placeholder="you@example.com"></label>
        </div>
        <label class="tg-field"><span>Subject</span><input type="text" name="subject" required placeholder="How can we help?"></label>
        <label class="tg-field"><span>Message</span><textarea name="message" required rows="5" placeholder="Write your message‚Ä¶"></textarea></label>
        <input type="text" name="_tg_hp" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden" tabindex="-1" autocomplete="off">
        <button class="tg-btn" id="tg-send-btn" type="submit">Send message</button>
        <div class="tg-note">We‚Äôll reply from <b>${CONTACT_TO}</b>. No spam, no sharing.</div>
      </form>`;
    host.appendChild(wrap);
  }
  function wireContact(){
    const form=document.getElementById('tg-contact-form'); const btn=document.getElementById('tg-send-btn'); if(!form||!btn) return;
    form.addEventListener('submit',(e)=>{
      e.preventDefault();
      const fd=new FormData(form);
      if(fd.get('_tg_hp')){toast('Blocked (spam)',false);return;}
      const email=String(fd.get('reply_to')||''); if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){toast('Enter a valid email',false);return;}
      const subj=encodeURIComponent(String(fd.get('subject')||'Contact from site'));
      const body=encodeURIComponent(`Name: ${fd.get('from_name')}\nEmail: ${email}\n\n${fd.get('message')}`);
      btn.disabled=true; btn.textContent='Sending‚Ä¶';

      const configured = EMAILJS_PUBLIC_KEY && EMAILJS_SERVICE_ID && EMAILJS_TEMPLATE_ID;
      function done(ok){ btn.disabled=false; btn.textContent='Send message'; toast(ok?'‚úÖ Message sent!':'‚ùå Failed. Try again.', ok); if(ok) form.reset(); }

      if(configured && window.emailjs){
        window.emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {from_name:fd.get('from_name'),reply_to:email,subject:fd.get('subject'),message:fd.get('message')})
          .then(()=>done(true)).catch(()=>done(false));
      }else if(configured && !window.emailjs){
        const s=document.createElement('script'); s.src="https://cdn.emailjs.com/sdk/3.11.0/email.min.js";
        s.onload=()=>{ try{window.emailjs.init(EMAILJS_PUBLIC_KEY);}catch{}; window.emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {from_name:fd.get('from_name'),reply_to:email,subject:fd.get('subject'),message:fd.get('message')})
          .then(()=>done(true)).catch(()=>done(false)); };
        document.body.appendChild(s);
      }else{ location.href=`mailto:${CONTACT_TO}?subject=${subj}&body=${body}`; done(true); }
    });
  }
  ensureContact(); wireContact();

  /* ========= MEDIA MANAGER (Owner-only) =========
     Lets you set: Logo image, Spinner video, Hero (img/video), Library items.
     Persists to localStorage; optionally merges with /assets/manifest.json if present.
  */
  const MM_KEY="tg_media_map";
  const DEF_MEDIA={
    logo: "assets/images/logo.png",
    spinner: "assets/videos/gc_spin.mp4",
    heroImage: "assets/images/hero.jpg",
    heroVideo: "assets/videos/hero.mp4",
    library: [] // [{type:'image'|'video', path:'assets/images/x.png', label:'‚Ä¶'}]
  };
  function loadMedia(){ try{return Object.assign({},DEF_MEDIA,JSON.parse(localStorage.getItem(MM_KEY)||"{}"))}catch{return {...DEF_MEDIA}}}
  function saveMedia(m){ try{localStorage.setItem(MM_KEY,JSON.stringify(m))}catch{} }
  const MEDIA = loadMedia();

  async function tryLoadManifest(){
    // Optional manifest: /assets/manifest.json
    // {
    //   "images": ["assets/images/logo.png","assets/images/hero.jpg"],
    //   "videos": ["assets/videos/gc_spin.mp4","assets/videos/hero.mp4"]
    // }
    try{
      const res = await fetch("assets/manifest.json?ts="+Date.now(), {cache:"no-store"});
      if(!res.ok) return;
      const man = await res.json();
      // If user hasn't picked custom ones, prefer manifest defaults
      if(!MEDIA.logo && man.images?.length) MEDIA.logo = man.images[0];
      if(!MEDIA.spinner && man.videos?.length) MEDIA.spinner = man.videos.find(v=>/spin|logo/i.test(v)) || man.videos[0];
      if(!MEDIA.heroImage && man.images?.length) MEDIA.heroImage = man.images.find(i=>/hero|bg/i.test(i)) || man.images[0];
      if(!MEDIA.heroVideo && man.videos?.length) MEDIA.heroVideo = man.videos.find(v=>/hero/i.test(v)) || man.videos[0];
      if(man.library?.length) MEDIA.library = man.library; // optional detailed library from file
      saveMedia(MEDIA);
    }catch{/* no manifest, ignore */}
  }

  // Apply media to DOM (best-effort selectors)
  function applyMedia(){
    // Logo
    const logoImg = document.querySelector('#siteLogo, img[alt*="logo" i]');
    if(logoImg && MEDIA.logo) logoImg.src = MEDIA.logo;

    // Spinner video (if present)
    const spinVideo = document.querySelector('#logoSpinner, #spinnerVideo, video[data-role="logo-spinner"]');
    if(spinVideo && MEDIA.spinner){ spinVideo.src = MEDIA.spinner; spinVideo.loop=true; spinVideo.muted=true; spinVideo.playsInline=true; spinVideo.autoplay=true; spinVideo.load(); spinVideo.play().catch(()=>{}); }

    // Hero image/video (prefer video if present)
    const heroVideo = document.querySelector('#heroVideo, video[data-role="hero"]');
    const heroImg   = document.querySelector('#heroImage, img[data-role="hero"]');
    if(heroVideo && MEDIA.heroVideo){ heroVideo.src = MEDIA.heroVideo; heroVideo.muted=true; heroVideo.loop=true; heroVideo.playsInline=true; heroVideo.autoplay=true; heroVideo.load(); heroVideo.play().catch(()=>{}); }
    else if(heroImg && MEDIA.heroImage){ heroImg.src = MEDIA.heroImage; }

    // Simple Library renderer (owner-only preview)
    const libHost = document.querySelector('#library, #tg-library');
    if(libHost){
      const items = MEDIA.library || [];
      if(items.length){
        libHost.innerHTML = `<div class="tg-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px"></div>`;
        const grid = libHost.firstElementChild;
        items.forEach(it=>{
          if(it.type==='video'){
            const v=document.createElement('video'); v.src=it.path; v.controls=true; v.style.width='100%'; v.style.borderRadius='12px';
            grid.appendChild(v);
          }else{
            const img=document.createElement('img'); img.src=it.path; img.alt=it.label||''; img.style.width='100%'; img.style.borderRadius='12px';
            grid.appendChild(img);
          }
        });
      }
    }
  }

  // Owner UI (Theme + Media tabs)
  if(isOwner){
    // Badge
    const b=document.createElement('div');
    b.textContent=`PATCH ${VER} ‚Ä¢ owner on`;
    Object.assign(b.style,{position:'fixed',left:'10px',bottom:'10px',zIndex:98,background:'#0d1016',border:'1px solid #2a3040',color:'#cfd6df',borderRadius:'10px',padding:'6px 10px',fontSize:'12px',opacity:'.45',pointerEvents:'none'});
    document.body.appendChild(b);

    // FAB
    const fab=document.createElement('button');
    fab.textContent='‚öôÔ∏è';
    Object.assign(fab.style,{position:'fixed',right:'14px',bottom:'14px',zIndex:99,width:'46px',height:'46px',borderRadius:'50%',border:'1px solid #2a3040',background:'#0b1016',color:'#f0f3f8',boxShadow:'0 10px 30px rgba(0,0,0,.45)',cursor:'pointer',fontSize:'20px'});
    document.body.appendChild(fab);

    // Panel with tabs
    const panel=document.createElement('div');
    panel.style.cssText="position:fixed;right:14px;bottom:74px;z-index:99;background:var(--tg-panel,#11151B);color:#cfd6df;border:1px solid #2a3040;border-radius:16px;width:min(420px,94vw);padding:0;box-shadow:0 18px 60px rgba(0,0,0,.45);font:500 13px/1.4 system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;display:none";
    panel.innerHTML=`
      <div style="display:flex;gap:6px;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #2a3040">
        <div style="display:flex;gap:6px">
          <button data-tab="theme" class="tgTab" style="all:unset;cursor:pointer;padding:6px 10px;border:1px solid #2a3040;border-radius:10px;background:#0b1016">Theme</button>
          <button data-tab="media" class="tgTab" style="all:unset;cursor:pointer;padding:6px 10px;border:1px solid #2a3040;border-radius:10px;background:#0b1016">Media</button>
        </div>
        <div style="display:flex;gap:8px">
          <button id="tgSave"  style="all:unset;cursor:pointer;padding:6px 10px;border:1px solid #5a4b20;border-radius:10px;background:#151007;color:#f6e7b9">Save</button>
          <button id="tgClose" style="all:unset;cursor:pointer;padding:6px 10px;border:1px solid #2a3040;border-radius:10px;background:#0b1016">Close</button>
        </div>
      </div>
      <div id="tgPane-theme" style="padding:12px;display:block"></div>
      <div id="tgPane-media" style="padding:12px;display:none"></div>
    `;
    document.body.appendChild(panel);
    fab.addEventListener('click',()=>panel.style.display=panel.style.display==='none'?'block':'none');
    panel.querySelector('#tgClose').addEventListener('click',()=>panel.style.display='none');

    // THEME pane
    const themePane=panel.querySelector('#tgPane-theme');
    themePane.innerHTML = `
      <div style="margin:10px 0 6px;color:#9fb0c6">Brand Colours</div>
      <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px">
        ${[["--tg-gold","Gold"],["--tg-silver","Silver"],["--tg-diamond","Diamond"],["--tg-border","Border"],["--tg-card","Card BG"],["--tg-card-ink","Card Text"]].map(([k,l])=>`
          <label style="display:grid;gap:6px">
            <span>${l}</span>
            <input data-var="${k}" type="color" value="${toColor(VARS[k])}" style="height:34px;border-radius:8px;background:#0d1018;border:1px solid #2a3040">
          </label>`).join('')}
      </div>
      <div style="margin:12px 0 6px;color:#9fb0c6">Radii & Border</div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
        ${rangeRow("--tg-radius","Radius",pxNum(VARS["--tg-radius"],18),6,32)}
        ${rangeRow("--tg-btn-radius","Btn Radius",pxNum(VARS["--tg-btn-radius"],14),4,26)}
        ${rangeRow("--tg-border-w","Border W",pxNum(VARS["--tg-border-w"],2),1,5)}
      </div>
    `;
    function rangeRow(varkey,label,val,min,max){
      return `<label style="display:grid;gap:6px"><span>${label}: <b id="${varkey}-val">${val}</b>px</span><input data-var="${varkey}" type="range" min="${min}" max="${max}" step="1" value="${val}"></label>`;
    }
    themePane.querySelectorAll('input[type="color"]').forEach(inp=>{
      inp.addEventListener('input',()=>{VARS[inp.dataset.var]=inp.value; applyVars();});
    });
    themePane.querySelectorAll('input[type="range"]').forEach(inp=>{
      const out=themePane.querySelector(`#${inp.dataset.var}-val`);
      inp.addEventListener('input',()=>{VARS[inp.dataset.var]=`${inp.value}px`; if(out) out.textContent=inp.value; applyVars();});
    });

    // MEDIA pane
    const mediaPane=panel.querySelector('#tgPane-media');
    function inputRow(id,label,placeholder,value){
      return `<label class="tg-field"><span>${label}</span><input id="${id}" type="text" placeholder="${placeholder}" value="${value||''}"></label>`;
    }
    mediaPane.innerHTML = `
      <div style="display:grid;gap:8px">
        ${inputRow("tgMediaLogo","Logo image path","assets/images/logo.png", MEDIA.logo)}
        ${inputRow("tgMediaSpin","Spinner video path","assets/videos/gc_spin.mp4", MEDIA.spinner)}
        ${inputRow("tgMediaHeroImg","Hero image path","assets/images/hero.jpg", MEDIA.heroImage)}
        ${inputRow("tgMediaHeroVid","Hero video path","assets/videos/hero.mp4", MEDIA.heroVideo)}
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button id="tgApplyMedia" class="tg-btn">Apply to page</button>
          <button id="tgLoadManifest" class="tg-btn">Load manifest.json</button>
          <button id="tgAddToLibrary" class="tg-btn">Add Library Item</button>
        </div>
        <div id="tgLibList" style="margin-top:8px"></div>
        <div class="tg-note">Tip: Put files in <code>assets/images/</code> or <code>assets/videos/</code>. Optionally add <code>assets/manifest.json</code> to auto-list.</div>
      </div>
    `;
    function renderLib(){
      const host=mediaPane.querySelector('#tgLibList');
      const arr=MEDIA.library||[];
      if(!arr.length){ host.innerHTML='<div class="tg-note">Library empty.</div>'; return; }
      host.innerHTML = `<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px"></div>`;
      const grid=host.firstElementChild;
      arr.forEach((it,idx)=>{
        const card=document.createElement('div');
        card.className='tg-surface tg-border'; card.style.padding='8px'; card.style.borderRadius='12px';
        card.innerHTML = `
          <div style="font-weight:700;margin-bottom:4px">${it.label||it.path.split('/').pop()}</div>
          <div style="font-size:12px;opacity:.7">${it.type} ¬∑ ${it.path}</div>
          <div style="display:flex;gap:6px;margin-top:6px">
            <button data-idx="${idx}" data-act="hero"  class="tg-btn">Set as Hero</button>
            <button data-idx="${idx}" data-act="logo"  class="tg-btn">Set as Logo</button>
          </div>
        `;
        grid.appendChild(card);
      });
      grid.querySelectorAll('button').forEach(btn=>{
        btn.onclick=()=>{
          const it=MEDIA.library[+btn.dataset.idx];
          if(!it) return;
          if(btn.dataset.act==='hero'){
            if(it.type==='video'){ MEDIA.heroVideo=it.path; MEDIA.heroImage=""; }
            else { MEDIA.heroImage=it.path; MEDIA.heroVideo=""; }
          }else if(btn.dataset.act==='logo'){
            if(it.type==='image') MEDIA.logo=it.path;
          }
          saveMedia(MEDIA); applyMedia(); toast('Applied');
        };
      });
    }
    renderLib();

    mediaPane.querySelector('#tgApplyMedia').onclick=()=>{
      MEDIA.logo = mediaPane.querySelector('#tgMediaLogo').value.trim();
      MEDIA.spinner = mediaPane.querySelector('#tgMediaSpin').value.trim();
      MEDIA.heroImage = mediaPane.querySelector('#tgMediaHeroImg').value.trim();
      MEDIA.heroVideo = mediaPane.querySelector('#tgMediaHeroVid').value.trim();
      saveMedia(MEDIA); applyMedia(); toast('Media applied & saved');
    };
    mediaPane.querySelector('#tgLoadManifest').onclick=async()=>{
      await tryLoadManifest(); renderLib(); applyMedia();
      toast('Manifest loaded (if present)');
    };
    mediaPane.querySelector('#tgAddToLibrary').onclick=()=>{
      const path = prompt('Path (e.g. assets/images/pic.png or assets/videos/clip.mp4)');
      if(!path) return;
      const type = /\.mp4|\.webm|\.mov$/i.test(path) ? 'video' : 'image';
      const label = prompt('Label (optional)', path.split('/').pop());
      MEDIA.library = MEDIA.library || [];
      MEDIA.library.push({type, path, label});
      saveMedia(MEDIA); renderLib(); applyMedia();
    };

    // Switch tabs
    panel.querySelectorAll('.tgTab').forEach(tab=>{
      tab.onclick=()=>{
        panel.querySelectorAll('.tgTab').forEach(t=>t.style.background='#0b1016');
        tab.style.background='#151a22';
        const id = tab.dataset.tab;
        panel.querySelector('#tgPane-theme').style.display = id==='theme'?'block':'none';
        panel.querySelector('#tgPane-media').style.display = id==='media'?'block':'none';
      };
    });

    // Save (theme + media)
    panel.querySelector('#tgSave').onclick=()=>{ saveVars(VARS); saveMedia(MEDIA); toast('Saved on this device'); };
  }

  // Initial media apply (after optional manifest)
  tryLoadManifest().finally(applyMedia);

  // Final wire for confetti & contact (in case DOM was not ready)
  document.addEventListener('DOMContentLoaded',()=>{wireConfetti(); wireContact();});

  console.info("THEGRID",VER,"loaded");
})();
</script>
<!-- THEGRID:PATCH-SLOT:END -->


</body>
</html>
